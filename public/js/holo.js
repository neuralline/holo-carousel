!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Holo=t()}(this,(function(){"use strict";var e,t={exports:{}};function r(){return e||(e=1,function(e){const t={reset:"[0m",magenta:"[35m",magentaBright:"[95m",red:"[31m",redBright:"[91m",green:"[32m",greenBright:"[92m",cyan:"[36m",cyanBright:"[96m",yellow:"[33m",yellowBright:"[93m",white:"[37m",whiteBright:"[97m",blue:"[34m",blueBright:"[94m",bgRed:"[41m",bgYellow:"[43m",bgBlue:"[44m",bold:"[1m",dim:"[2m",italic:"[3m",underline:"[4m"},r={DEBUG:["dim","cyan"],INFO:["blue","bold"],WARN:["yellowBright","bold"],ERROR:["redBright","bold"],SUCCESS:["greenBright","bold"]},i="undefined"!=typeof process&&process.versions&&process.versions.node,o="undefined"!=typeof window,n={DEBUG:0,INFO:1,WARN:2,ERROR:3,SUCCESS:1},a=(e,r,a)=>(s,l=!0,d=!1)=>{if(n[e]<n.DEBUG)return;const c=(u=e,m=s,`${l?`[${(new Date).toISOString()}]`:""} ${u}: ${m instanceof Error?`${m.message}\n${m.stack}`:"object"==typeof m?JSON.stringify(m,null,2):String(m)}`);var u,m;if(d||o){const t="ERROR"===e?"color: red; font-weight: bold":"WARN"===e?"color: orange; font-weight: bold":"SUCCESS"===e?"color: green; font-weight: bold":"INFO"===e?"color: blue":"color: gray";console[a](`%c${c}`,t)}else if(i){const e=r.reduce(((e,r)=>`${t[r]}${e}`),c);process.stdout.write(`${e}${t.reset}\n`)}},s={error:a("ERROR",r.ERROR,"error"),warn:a("WARN",r.WARN,"warn"),info:a("INFO",r.INFO,"log"),debug:a("DEBUG",r.DEBUG,"debug"),success:a("SUCCESS",r.SUCCESS,"log")},l=e=>{const t=new WeakMap;return(...r)=>{const i=r[0];return"object"==typeof i&&null!==i?(t.has(i)||t.set(i,e(...r)),t.get(i)):e(...r)}},d=(e,...t)=>t.reduce(((e,t)=>t(e)),e),c=(e,t)=>{if(Object.is(e,t))return!0;if("object"!=typeof e||"object"!=typeof t||null===e||null===t)return!1;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every(((e,r)=>c(e,t[r])));const r=Object.keys(e),i=Object.keys(t);return r.length===i.length&&r.every((r=>c(e[r],t[r])))},u={RECUPERATION:6e4,MAX_TIMEOUT:Math.pow(2,31)-1},m="@cyre: System is offline",f="@cyre: System is online",h="@cyre: Welcome! How can I assist you?",g="Failed to prepare action: invalid configuration",p="Failed to execute action: runtime error",y="Action skipped: no payload changes detected",E="Failed to create channel: configuration error",v="Channel created successfully",S="Invalid channel data definition",R="Channel ID is required",I="Channel type is required",_="Invalid channel type specified",O="Invalid channel structure: check configuration",T="Invalid subscription parameters provided",w="Subscriber exists - updating configuration",b="Successfully subscribed to event",C="Invalid event handler provided",A="Subscription failed: check configuration",L="Call failed: system is offline",N="Call failed: invalid action ID",$="Call failed: action not responding",D="Dispatch failed: no subscriber found for this type",M="Q0.0U0.0A0.0N0.0T0.0U0.0M0 - I0.0N0.0C0.0E0.0P0.0T0.0I0.0O0.0N0.0S0-- ",k={MIN:50,BASE:200,MAX:1e3,RECOVERY:2e3},x={HIGH:.9,CRITICAL:.95},P={MAX_CPU:80,MAX_MEMORY:85,MAX_EVENT_LOOP:50,MAX_CALL_RATE:1e3},H={system:{cpu:0,memory:0,eventLoop:0,isOverloaded:!1},breathing:{breathCount:0,currentRate:k.BASE,lastBreath:Date.now(),stress:0,isRecuperating:!1,recuperationDepth:0,pattern:"NORMAL",nextBreathDue:Date.now()+k.BASE},performance:{callsTotal:0,callsPerSecond:0,lastCallTimestamp:Date.now(),activeQueues:{critical:0,high:0,medium:0,low:0,background:0},queueDepth:0},stress:{cpu:0,memory:0,eventLoop:0,callRate:0,combined:0},lastUpdate:Date.now(),inRecuperation:!1,hibernating:!1,activeFormations:0},X=()=>{const e=new Map;return{get:t=>e.get(t),set:(t,r)=>{e.set(t,r),e.size>1e3&&Array.from(e.keys()).slice(0,e.size-1e3).forEach((t=>e.delete(t)))},forget:t=>e.delete(t),clear:()=>e.clear(),getAll:()=>Array.from(e.values()),size:()=>e.size}},Y=X();Y.set("quantum",H);const F=l(((e,t)=>{const r=Math.min(1,(e.cpu||0)/(.7*P.MAX_CPU)),i=Math.min(1,(e.memory||0)/(.7*P.MAX_MEMORY)),o=Math.min(1,(e.eventLoop||0)/(.7*P.MAX_EVENT_LOOP)),n=Math.min(1,(t.callsPerSecond||0)/(.7*P.MAX_CALL_RATE)),a=Math.max(r,i,o,n);return{cpu:r,memory:i,eventLoop:o,callRate:n,combined:Math.min(1,(r+i+o+n+2*a)/6)}})),U=e=>{if(e>=x.CRITICAL)return k.RECOVERY;const t=Math.exp(e)-1;return Math.max(k.MIN,Math.min(k.MAX,k.BASE*(1+t)))},V={inRecuperation:!1,hibernating:!1,activeFormations:0,recuperationInterval:void 0,get:()=>{const e=Y.get("quantum");return Object.freeze({...e,inRecuperation:V.inRecuperation,hibernating:V.hibernating,activeFormations:V.activeFormations})},update:e=>{const t={...Y.get("quantum"),...e,lastUpdate:Date.now(),inRecuperation:e.inRecuperation??V.inRecuperation,hibernating:e.hibernating??V.hibernating,activeFormations:e.activeFormations??V.activeFormations};return(e.system||e.performance)&&(t.stress=F(t.system,t.performance)),Y.set("quantum",t),t},updateBreath:e=>{const t=Y.get("quantum"),r=F(e,t.performance),i=Date.now(),o={...t.breathing,breathCount:t.breathing.breathCount+1,lastBreath:i,stress:r.combined,currentRate:U(r.combined),nextBreathDue:i+U(r.combined),isRecuperating:r.combined>x.HIGH,recuperationDepth:Math.min(1,r.combined),pattern:r.combined>x.HIGH?"RECOVERY":"NORMAL"};return V.update({system:e,breathing:o,stress:r,inRecuperation:o.isRecuperating})},recordCall:(e="medium")=>{const t=Y.get("quantum"),r=Date.now(),i=r-t.performance.lastCallTimestamp>=1e3?1:t.performance.callsPerSecond+1,o={...t.performance,callsTotal:t.performance.callsTotal+1,callsPerSecond:i,lastCallTimestamp:r,activeQueues:{...t.performance.activeQueues,[e]:t.performance.activeQueues[e]+1},queueDepth:t.performance.queueDepth+1};return V.update({performance:o})},isHealthy:()=>{const e=Y.get("quantum");return!e.breathing.isRecuperating&&e.stress.combined<x.HIGH},shouldAllowCall:e=>{const t=Y.get("quantum");return t.breathing.isRecuperating?"critical"===e:t.stress.combined<x.HIGH||"critical"===e||"high"===e},reset:()=>{V.inRecuperation=!1,V.hibernating=!1,V.activeFormations=0,Y.set("quantum",H)},forget:e=>{Y.forget(e)}},B=X(),q=X(),z=X(),W=X(),j=X(),G=e=>{const t=j.get(e);t?.intervalId&&clearInterval(t.intervalId),j.forget(e),W.forget(e)},Z=e=>{if(!e?.id)throw new Error("IO must have an id");try{const t={...e,timestamp:Date.now(),type:e.type||e.id};G(e.id),B.set(e.id,t),j.set(e.id,{lastExecutionTime:Date.now(),executionCount:0,errors:[]}),e.detectChanges&&W.set(e.id,e.payload),V.recordCall(e.priority?.level)}catch(t){throw s.error(`Failed to set IO: ${t instanceof Error?t.message:String(t)}`),t}},K=e=>B.get(e),Q=e=>(G(e),B.forget(e)),J=()=>{B.getAll().forEach((e=>{e.id&&G(e.id)})),W.clear(),j.clear(),B.clear(),V.reset()},ee=(e,t)=>{const r=W.get(e);return!c(t,r)},te=e=>W.get(e),re=e=>j.get(e),ie=e=>{if(!e?.id||!e?.fn)throw new Error("Invalid subscriber format");q.set(e.id,e)},oe=e=>q.get(e),ne=()=>q.clear(),ae=e=>{e.id&&z.set(e.id,e)},se=e=>z.get(e),le=e=>{const t=z.get(e);return t?.timeoutId&&clearTimeout(t.timeoutId),z.forget(e)},de=()=>{z.getAll().forEach((e=>{e.timeoutId&&clearTimeout(e.timeoutId)})),z.clear()},ce=()=>z.getAll(),ue=()=>z.getAll().filter((e=>"active"===e.status)),me=e=>e.type&&e.id?{...e,ok:!0,status:"active"}:{...e,ok:!1,done:!1,status:"error",error:"Missing required fields: type or id"},fe=e=>e.detectChanges?ee(e.id,e.payload)?e:{...e,ok:!0,done:!0,status:"skipped",skipped:!0,skipReason:y}:e,he=e=>{if(e.skipped||"error"===e.status)return e;try{const t=oe(e.id);if(!t)throw new Error("No subscriber found");const r=t.fn(e.payload);return r&&"object"==typeof r&&"id"in r?{...e,ok:!0,done:!0,status:"completed",intraLink:{id:r.id,payload:r.payload}}:{...e,ok:!0,done:!0,status:"completed"}}catch(t){return s.error(`${p}: ${t}`),{...e,ok:!1,done:!1,status:"error",error:t instanceof Error?t.message:String(t)}}},ge=(e,t)=>{if(!e)return s.error(g),{id:"",type:"",ok:!1,done:!1,status:"error",error:g};try{return d((e=>{try{if(!e)throw new Error(g);return{...e,ok:!0,done:!1,status:"pending",timestamp:Date.now()}}catch(t){return{id:"",type:"",ok:!1,done:!1,status:"error",error:g}}})(e),me,fe,he,(e=>{return"error"===e.status?e:((t=e).log&&("error"===t.status?s.error(t):(t.status,s.info(t))),t);var t}),(e=>{return"error"===e.status?e:((t=e).ok&&!t.skipped&&Z({...t,timestamp:Date.now()}),t);var t}))}catch(r){return s.error(`Action processing failed: ${r}`),{...e,ok:!1,done:!1,status:"error",error:r instanceof Error?r.message:String(r)}}},pe=l((e=>e?e.id?e.type||e.id?e.type&&"string"!=typeof e.type?{isValid:!1,error:_}:{isValid:!0}:{isValid:!1,error:I}:{isValid:!1,error:R}:{isValid:!1,error:O})),ye=(e,t)=>{try{if(!("object"==typeof(o=e)&&null!==o&&"id"in o&&"string"==typeof o.id&&o.id.length>0))return s.error(O),{ok:!1,message:O};const n=pe(e);if(!n.isValid)return s.error(n.error),{ok:!1,message:n.error};if(r=e,(i=t)&&!Object.entries(i).filter((([e,t])=>t(void 0).required)).map((([e])=>e)).every((e=>e in r)))return s.error(S),{ok:!1,message:S};const a=((e,t)=>{try{const r={...e},i=[];for(const[o,n]of Object.entries(e)){const e=t[o];if(!e){r[o]=n;continue}const a=e(n);if(!a.ok){if(a.required)return{ok:!1,message:`Required field '${o}' validation failed: ${a.message}`,payload:r};i.push(`${o}: ${a.message}`)}r[o]=a.payload}for(const[o,n]of Object.entries(t))if(n(void 0).required&&!(o in e))return{ok:!1,message:`Missing required field: ${o}`,payload:r};return i.length>0?{ok:!1,message:i.join("; "),payload:r}:{ok:!0,payload:r}}catch(r){const e=r instanceof Error?r.message:String(r);return s.error(`Data definition processing failed: ${e}`),{ok:!1,message:S}}})(e,t);if(!a.ok)return a;const l=(e=>{const t=Date.now();return{...e,type:e.type||e.id,timestamp:t,interval:e.interval||0,timeOfCreation:e.timeOfCreation||t}})({...a.payload,id:e.id});return s.success(v),{ok:!0,message:v,payload:l}}catch(n){const e=n instanceof Error?n.message:String(n);return s.error(`Channel processing failed: ${e}`),{ok:!1,message:E}}var r,i,o},Ee=(e,t)=>{try{const o=(i=t,(r=e)&&"string"==typeof r?"function"!=typeof i?{ok:!1,message:C,error:{code:"INVALID_HANDLER",message:"Event handler must be a function"}}:{ok:!0,message:b,subscriber:{id:r.trim(),fn:i}}:{ok:!1,message:_,error:{code:"INVALID_TYPE",message:`Type must be a non-empty string, received: ${r}`}});if(!o.ok||!o.subscriber)return s.error(o.error||o.message),{ok:!1,message:o.message};const{subscriber:n}=o;return oe(n.id)&&s.info(`${n.id}: ${w}`),ie(n),s.info(`${b}: ${n.id}`),{ok:!0,message:`${b}: ${n.id}`}}catch(o){const e=o instanceof Error?o.message:String(o);return s.error(`Failed to add subscriber: ${e}`),{ok:!1,message:A}}var r,i},ve=(e,t)=>Array.isArray(e)?(e=>{try{const t=e.map((e=>{if(!e.id||!e.fn)return s.error(`Invalid subscriber format: ${JSON.stringify(e)}`),!1;try{return ie(e),!0}catch(t){return s.error(`Failed to add subscriber ${e.id}: ${t}`),!1}})).filter(Boolean).length,r=e.length;return 0===t?{ok:!1,message:`Failed to add any subscribers out of ${r}`}:{ok:!0,message:`Successfully added ${t} out of ${r} subscribers`}}catch(t){const e=t instanceof Error?t.message:String(t);return s.error(`Batch subscription failed: ${e}`),{ok:!1,message:A}}})(e):"string"==typeof e&&t?Ee(e,t):(s.error(T),{ok:!1,message:T}),Se=async e=>{if(!e||!e.id)return;const t=performance.now(),r=se(e.id);if(r&&r.isActive)try{await e.callback();const i=performance.now()-t;r.metrics.totalExecutions++,r.metrics.successfulExecutions++,r.metrics.lastExecutionTime=i,r.metrics.longestExecutionTime=Math.max(r.metrics.longestExecutionTime,i),r.metrics.shortestExecutionTime=Math.min(r.metrics.shortestExecutionTime,i),r.metrics.averageExecutionTime=(r.metrics.averageExecutionTime*(r.metrics.totalExecutions-1)+i)/r.metrics.totalExecutions,r.executionCount++,r.lastExecutionTime=Date.now(),!0!==r.repeat&&"number"==typeof r.repeat&&(r.repeat=r.repeat-1),ae(r),!0===r.repeat||"number"==typeof r.repeat&&r.repeat>0?Ie(r):le(r.id)}catch(i){const t=se(e.id);t&&(t.metrics.failedExecutions++,ae(t)),s.error(`Timer execution failed: ${i}`)}},Re=e=>{if(!e||!e.id)return;const t=e.duration>u.RECUPERATION?u.RECUPERATION:Math.max(e.duration/10,1e3);let r,i=Date.now();const o=()=>{const n=se(e.id);if(!n||!n.isActive)return void clearTimeout(r);const a=Date.now(),s=V.get(),l=1+(s.stress?.combined||0);if(a-i>t||Math.abs(l-1)>.1){const e=n.originalDuration-n.executionCount*u.MAX_TIMEOUT;n.duration=Math.min(e,u.MAX_TIMEOUT)*l,n.nextExecutionTime=a+n.duration,ae(n),i=a}s.hibernating||"active"!==n.status||(r=setTimeout(o,t),n.recuperationInterval=r,ae(n))};return r=setTimeout(o,t),r},Ie=e=>{if(!e||!e.id)return;const t=V.get();if(t.hibernating)return;const r=Date.now(),i=1+(t.stress?.combined||0),o=se(e.id);if(!o||!o.isActive)return;if(o.executionCount>1e4)return s.error("Maximum execution count exceeded"),void le(o.id);let n=o.duration*i;if(o.isInRecuperation){const e=o.originalDuration-o.executionCount*u.MAX_TIMEOUT;n=Math.min(e*i,u.MAX_TIMEOUT),o.duration=n,o.duration>u.RECUPERATION&&(o.recuperationInterval&&clearTimeout(o.recuperationInterval),o.recuperationInterval=Re(o)),e<=u.MAX_TIMEOUT&&(o.isInRecuperation=!1)}else o.duration=n;o.nextExecutionTime=r+o.duration,o.timeoutId&&clearTimeout(o.timeoutId);const a="undefined"!=typeof process&&"test"===process.env.NODE_ENV;o.timeoutId=a?setTimeout((()=>Se(o)),o.duration):o.duration<25?((e,t)=>{if("undefined"!=typeof process&&"test"===process.env.NODE_ENV)return setTimeout(e,t);const r=process.hrtime(),i=()=>{const[o,n]=process.hrtime(r),a=1e3*o+n/1e6;if(a>=t)e();else{const e=t-a;e<1?setImmediate(i):e<25?setTimeout(i,0):setTimeout(i,Math.floor(e/2))}};return setTimeout(i,0)})((()=>Se(o)),o.duration):setTimeout((()=>Se(o)),o.duration),ae(o)},_e=(e,t,r,i=crypto.randomUUID())=>{try{const n=((e,t,r,i)=>{if(!e||"number"!=typeof t||"function"!=typeof r)throw new Error("Invalid formation parameters");const o=Date.now(),n=t>=u.MAX_TIMEOUT,a=V.get(),s=1+(a.stress?.combined||0),l={id:e,startTime:o,duration:n?u.MAX_TIMEOUT:t*s,originalDuration:t,callback:r,repeat:i,executionCount:0,lastExecutionTime:0,nextExecutionTime:o+(n?u.MAX_TIMEOUT:t*s),isInRecuperation:n,status:"active",isActive:!0,metrics:{totalExecutions:0,successfulExecutions:0,failedExecutions:0,averageExecutionTime:0,lastExecutionTime:0,longestExecutionTime:0,shortestExecutionTime:1/0,missedExecutions:0}};return n&&(l.recuperationInterval=Re(l)),l})(i,"number"==typeof e?e:24*((o=e).days||0)*60*60*1e3+60*(o.hours||0)*60*1e3+60*(o.minutes||0)*1e3+1e3*(o.seconds||0)+(o.milliseconds||0),t,r);return ae(n),Ie(n),{kind:"ok",value:n}}catch(n){return{kind:"error",error:n instanceof Error?n:new Error("Timer creation failed")}}var o},Oe=e=>{if(e){const t=se(e);t&&(t.timeoutId&&clearTimeout(t.timeoutId),t.recuperationInterval&&clearTimeout(t.recuperationInterval),t.status="paused",t.isActive=!1,ae(t))}else ce().forEach((e=>{e.timeoutId&&clearTimeout(e.timeoutId),e.recuperationInterval&&clearTimeout(e.recuperationInterval),e.status="paused",e.isActive=!1,ae(e)}))},Te=e=>{if(!V.get().hibernating)if(e){const t=se(e);t&&"paused"===t.status&&(t.status="active",t.isActive=!0,ae(t),Ie(t))}else ce().forEach((e=>{"paused"===e.status&&(e.status="active",e.isActive=!0,ae(e),Ie(e))}))},we=()=>{V.update({hibernating:!0}),ce().forEach((e=>{e.timeoutId&&clearTimeout(e.timeoutId),e.recuperationInterval&&clearTimeout(e.recuperationInterval)})),de()},be={id:(e="")=>"string"==typeof e?{ok:!0,payload:e}:{ok:!1,payload:null,message:`action.id must be a string. Received '${e}'`,required:!0},type:(e="")=>"string"==typeof e?{ok:!0,payload:e}:{ok:!1,payload:null,message:`action.type must be a string. Received '${e}'`,required:!0},payload:(e=null)=>({ok:!0,payload:e}),interval:(e=0)=>Number.isInteger(e)?{ok:!0,payload:e}:{ok:!1,payload:0,message:`'${e}' invalid action.interval value`,required:!1},timeOfCreation:(e=0)=>Number.isInteger(e)?{ok:!0,payload:e}:{ok:!1,payload:0,message:`'${e}' invalid @cyre.call time of creation value`,required:!0},repeat:(e=0)=>Number.isInteger(e)?{ok:!0,payload:e}:{ok:!1,payload:0,message:`'${e}' invalid action.repeat value`,required:!1},message:(e="")=>"string"==typeof e?{ok:!0,payload:e}:{ok:!1,payload:"",message:`action.message must be a string. Received '${e}'`,required:!1},group:(e="")=>"string"==typeof e?{ok:!0,payload:e}:{ok:!1,payload:null,message:`'${e}' invalid action.group value`,required:!1},callback:(e="")=>"string"==typeof e?{ok:!0,payload:e}:{ok:!1,payload:null,message:`'${e}' invalid action.callback value`,required:!1},log:(e=!1)=>"boolean"==typeof e?{ok:!0,payload:e}:{ok:!1,payload:!1,message:`'${e}' invalid action.log value`,required:!1},middleware:(e="")=>"string"==typeof e?{ok:!0,payload:e}:{ok:!1,payload:null,message:`'${e}' invalid action.middleware value`,required:!1},throttle:(e=0)=>Number.isInteger(e)?{ok:!0,payload:e}:{ok:!1,payload:100,message:`'${e}'  action.throttle value must be a number`,required:!1},debounce:(e=0)=>Number.isInteger(e)?{ok:!0,payload:e}:{ok:!1,payload:100,message:`'${e}'  action.debounce value must be a number`,required:!1},at:(e=0)=>({ok:!1,payload:e,message:`'${e}'  action.at is an experimental feature, not applied yet`,required:!1})},Ce=function(e=crypto.randomUUID()){let t=!1;const r=async(e,t,r)=>{const i=_e(t,(async()=>{V.isHealthy()&&await o({...e,timeOfCreation:performance.now(),payload:r??e.payload})}),e.repeat||!0,e.id);return"error"===i.kind?{ok:!1,payload:null,message:i.error.message}:{ok:!0,payload:null,message:`Scheduled with breathing-adjusted interval: ${Math.round(t)}ms`}},i=async(e,t)=>{const r=e.priority?.level||"medium";if(!V.shouldAllowCall(r)){const{stress:e}=V.get();return{ok:!1,payload:null,message:`System under high stress (${(100*e.combined).toFixed(1)}%). Try later.`}}return n(e,t)},o=async e=>{if(!e?.type)throw new Error("Invalid IO object");try{const r=oe(e.type)||oe(e.id);if(!r){const t=`${D} ${e.type}`;return s.error(t),{ok:!1,payload:null,message:t}}const i=performance.now(),o=ge({...e},r.fn);if(e.log&&s.info({...o,executionTime:performance.now()-i,timestamp:Date.now()}),o?.intraLink)try{const{id:e,payload:t}=o.intraLink;await a(e,t)}catch(t){s.error(`Linked action error: ${t}`)}return{ok:!0,payload:o,message:h}}catch(t){const e=t instanceof Error?t.message:String(t);return s.error(`Dispatch error: ${e}`),{ok:!1,payload:null,message:`Dispatch error: ${e}`}}},n=async(e,t)=>{try{if(e.throttle){const t=Date.now()-(re(e.id)?.lastExecutionTime||0);if(t<e.throttle)return{ok:!1,payload:null,message:`Throttled: ${e.throttle-t}ms remaining`}}const r=await o({...e,timeOfCreation:performance.now(),payload:t??e.payload});return V.recordCall(e.priority?.level),r}catch(r){return{ok:!1,payload:null,message:`Call failed: ${r instanceof Error?r.message:String(r)}`}}},a=async(e,o)=>{if(t)return{ok:!1,message:L,payload:null};if(!e?.trim())return{ok:!1,message:N,payload:null};const a=K(e.trim());return a?(async(e,t)=>{if(!e)return{ok:!1,payload:null,message:"Invalid action"};const{breathing:o,stress:a}=V.get();if(o.isRecuperating&&"critical"!==e.priority?.level)return{ok:!1,payload:null,message:`System recuperating (${(100*o.recuperationDepth).toFixed(1)}% depth). Try later.`};if(e.interval){const i=e.interval*(1+a.combined);return r(e,i,t)}return a.combined>=x.HIGH?i(e,t):n(e,t)})(a,o):{ok:!1,payload:null,message:`${$}: ${e}`}},l=()=>{if(!t)try{ce().forEach((e=>{e.timeoutId&&clearTimeout(e.timeoutId)})),we(),ne(),J(),V.reset(),t=!0,"undefined"!=typeof process&&process.exit&&process.exit(0)}catch(e){s.error(`Failed to shutdown gracefully: ${e}`),"undefined"!=typeof process&&process.exit&&process.exit(1)}};return"undefined"!=typeof window?window.addEventListener("beforeunload",l):(process.on("SIGINT",l),process.on("SIGTERM",l),process.on("uncaughtException",(e=>{console.error("Uncaught Exception:",e),l()}))),{initialize:()=>(t=!1,_e(k.BASE,(async()=>{const e=V.get();V.updateBreath({cpu:e.system.cpu,memory:e.system.memory,eventLoop:e.system.eventLoop,isOverloaded:e.system.isOverloaded})}),!0),Te(),console.log("%c"+M,"background: rgb(151, 2, 151); color: white; display: block;"),{ok:!0,payload:200,message:h}),call:a,action:e=>{if(t)s.error(m);else try{if(Array.isArray(e))e.forEach((e=>{const t=ye({...e,type:e.type||e.id},be);t.ok&&t.payload&&Z(t.payload)}));else{const t=ye({...e,type:e.type||e.id},be);t.ok&&t.payload&&Z(t.payload)}}catch(r){s.error(`Action registration failed: ${r}`)}},on:ve,shutdown:l,status:()=>(t?s.info({ok:!0,message:m}):s.info({ok:!0,message:f}),t),forget:e=>t?(s.error(L),!1):(Oe(e),Q(e)),get:e=>{if(!t)return K(e);s.error(L)},pause:e=>{if(t)return void s.error(L);Oe(e);const r=ce();if(e){const t=se(e);t&&ae({...t,status:"paused"})}else r.forEach((e=>{e&&ae({...e,status:"paused"})}))},resume:e=>{if(t)return void s.error(L);Te(e);const r=ce();if(e){const t=se(e);t&&ae({...t,status:"active"})}else r.forEach((e=>{e&&ae({...e,status:"active"})}))},hasChanged:(e,r)=>t?(s.error(L),!1):ee(e,r),getPreviousPayload:e=>{if(!t)return te(e);s.error(L)},getBreathingState:()=>V.get().breathing,getPerformanceState:()=>{const e=V.get();return{totalProcessingTime:0,totalCallTime:0,totalStress:e.stress.combined,stress:e.stress.combined}},getMetrics:e=>t?{hibernating:!0,activeFormations:0,inRecuperation:!1,breathing:V.get().breathing,formations:[]}:{hibernating:!1,activeFormations:ue().length,inRecuperation:!1,breathing:V.get().breathing,formations:ce().filter((t=>t.id===e)).map((e=>({...e,breathingSync:1})))}}},Ae=Ce("quantum-inceptions");Ae.initialize(),e.Cyre=Ce,e.CyreLog=s,e.cyre=Ae,e.debounce=(e,t)=>{let r,i;const o=(...o)=>{i=o,clearTimeout(r),r=setTimeout((()=>e(...i)),t)};return o.cancel=()=>{clearTimeout(r)},o},e.default="./app",e.isEqual=c,e.memoize=l,e.pipe=d,e.throttle=(e,t)=>{let r,i=null,o=0;const n=(...n)=>{r=n;const a=Date.now();o&&a<o+t?null===i&&(i=setTimeout((()=>{o=Date.now(),i=null,e(...r)}),t)):(o=a,e(...n))};return n.cancel=()=>{i&&(clearTimeout(i),i=null)},n},e.tryCatch=async e=>{try{return{kind:"ok",value:await e()}}catch(t){return{kind:"error",error:t instanceof Error?t:new Error(String(t))}}},e.version="3.1.2",Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}(t.exports)),t.exports}var i=r();const o="touch_start",n="touch_end",a="drag_horizontal",s="drag_vertical",l="track_velocity",d="process_touch_end",c={INIT_CAROUSEL:"init_carousel",INIT_DIMENSIONS:"init_dimensions",STATE_UPDATE:"state_update",STATE_BATCH_UPDATE:"state_batch_update",REFRESH_CAROUSEL:"refresh_carousel",REFRESH_SCREEN:"refresh_screen",SNAP_TO_POSITION:"snap_to_position",SNAP:"snap",TRANSFORM_COMPLETE:"transform_complete",ANIMATE_FORWARD:"animate_forward",ANIMATE_BACKWARD:"animate_backward",NEXT_SLIDE:"next_slide",PREV_SLIDE:"prev_slide",FIRST_SLIDE:"first_slide",LAST_SLIDE:"last_slide",GO_TO_SLIDE:"go_to_slide",ACTIVATE:"activate",BRING_TO_FOCUS:"bring_to_focus",WHEEL_EVENT:"wheel_event",KEYBOARD_EVENT:"keyboard_event",SHAKE:"shake",ERROR_HANDLER:"error_handler",PERFORMANCE_MONITOR:"performance_monitor",PERFORMANCE_OPTIMIZE:"performance_optimize"},u=600,m="cubic-bezier(0.215, 0.61, 0.355, 1)",f=.8,h=.5,g=10,p={enabled:1,wheel:0,controller:0,drag:1,swipe:1,snap:3,focus:1,animate:0,animateDirection:1,duration:600,loop:0,orientation:0,active:!0,onClick:!0,onDoubleClick:!1},y="holo-carousel",E=e=>{e.item.width&&!isNaN(e.item.width)||(i.CyreLog.warn(`Missing width for horizontal carousel ${e.id}. Using fallback.`),e.item.width=200);const t={...e,transformY:0,transformX:e.io.snap&&e.item.width?L(e.transformX,e.item.width||0):e.transformX},r=e.container.width||0,o=e.carousel.width||0,n=-Math.max(0,r-o);return n!==e.endOfSlidePosition&&(i.CyreLog.info(`Updating end position for ${e.id}: ${e.endOfSlidePosition} -> ${n}`),t.endOfSlidePosition=n),t.transformX>=0?(t.transformX=0,t.endOfSlide=1):t.transformX<=t.endOfSlidePosition?(t.transformX=t.endOfSlidePosition,t.endOfSlide=-1):t.endOfSlide=0,t},v=e=>{e.item.height&&!isNaN(e.item.height)||(i.CyreLog.warn(`Missing height for vertical carousel ${e.id}. Using fallback.`),e.item.height=200);const t={...e,transformX:0,transformY:e.io.snap&&e.item.height?L(e.transformY,e.item.height||0):e.transformY},r=e.container.height||0,o=e.carousel.height||0,n=-Math.max(0,r-o);return n!==e.endOfSlidePosition&&(i.CyreLog.info(`Updating end position for ${e.id}: ${e.endOfSlidePosition} -> ${n}`),t.endOfSlidePosition=n),t.transformY>=0?(t.transformY=0,t.endOfSlide=1):t.transformY<=t.endOfSlidePosition?(t.transformY=t.endOfSlidePosition,t.endOfSlide=-1):t.endOfSlide=0,t},S=e=>{const t={...e,transformY:0};return t.transformX>=0?(t.transformX=0,t.endOfSlide=1):t.transformX<=t.endOfSlidePosition?(t.transformX=t.endOfSlidePosition,t.endOfSlide=-1):t.endOfSlide=0,t},R=e=>{e.item.height&&!isNaN(e.item.height)||(i.CyreLog.warn(`Missing height for vertical carousel ${e.id}. Using fallback.`),e.item.height=200);const t={...e,transformX:0};return t.transformY>=0?(t.transformY=0,t.endOfSlide=1):t.transformY<=t.endOfSlidePosition?(t.transformY=t.endOfSlidePosition,t.endOfSlide=-1):t.endOfSlide=0,t},I=(e,t)=>{if(!t?.container||!t?.carousel)return i.CyreLog.error("Missing carousel DOM elements"),null;try{const r=t.container.children[0];if(!r)return i.CyreLog.warn(`No slides found in carousel ${e.id}`),null;0!==r.offsetWidth&&0!==r.offsetHeight||(t.carousel.style.visibility="hidden",t.carousel.style.display="block",t.container.style.visibility="hidden",t.container.style.display="flex",t.carousel.offsetHeight,r.offsetHeight);const o=(e=>{if(!e)return{width:0,height:0};const t=e.getBoundingClientRect(),r=window.getComputedStyle(e),i=parseInt(r.marginLeft)||0,o=parseInt(r.marginRight)||0,n=parseInt(r.marginTop)||0,a=parseInt(r.marginBottom)||0;return{width:t.width+i+o,height:t.height+n+a}})(r);if(0===o.width||0===o.height)return i.CyreLog.warn(`Zero dimensions for carousel ${e.id}, will retry later`),null;const n=t.carousel.parentElement?.clientWidth||t.carousel.clientWidth||window.innerWidth,a=Math.min(Math.max(1,Math.floor(n/o.width)),e.item.max||10),s=a*o.width,l=t.container.children.length*o.width,d=(e.io.orientation,-Math.abs((l||0)-(s||0)));return t.carousel.style.visibility="",t.container.style.visibility="",{...e,item:{...e.item,width:o.width,height:o.height},numberOfSlots:a,carousel:{width:s||t.carousel.clientWidth,height:o.height||t.carousel.clientHeight},container:{width:e.io.orientation?t.carousel.clientWidth:l,height:t.container.clientHeight||o.height},endOfSlidePosition:d}}catch(r){return i.CyreLog.error(`Error calculating dimensions for ${e.id}:`,r),null}},_=e=>new Promise((t=>{if(!A[e])return i.CyreLog.error(`Carousel ${e} not found`),void t(!1);const r=A[e].getState,{virtual:o,shadow:n}=r;i.CyreLog.info(`Force calculating dimensions for carousel ${e}`);const a=O(o,n);if(a&&(A[e].setDimension={...a},0===o.io.orientation&&a.item.width>0||1===o.io.orientation&&a.item.height>0))return i.CyreLog.info(`Successfully calculated dimensions for ${e}:`,{width:a.item.width,height:a.item.height}),void t(!0);i.CyreLog.warn(`Initial dimension calculation failed for ${e}, retrying with delay`),setTimeout((()=>{try{n.carousel&&(n.carousel.style.display="block"),n.container&&(n.container.style.display="flex"),n.carousel&&n.carousel.offsetHeight,n.container&&n.container.offsetHeight;const r=O(o,n);r?(A[e].setDimension={...r},i.CyreLog.info(`Retry succeeded for ${e}:`,{width:r.item.width,height:r.item.height}),t(!0)):(i.CyreLog.error(`Dimension calculation failed for ${e} after retry`),t(!1))}catch(r){i.CyreLog.error(`Error during retry for ${e}:`,r),t(!1)}}),300)})),O=(e,t)=>{if(!t?.container||!t?.carousel)return i.CyreLog.error("Missing carousel DOM elements"),null;try{if(0===t.container.offsetWidth&&0===t.container.offsetHeight)return i.CyreLog.warn(`DOM not ready for measurement, carousel: ${e.id}`),null;const r=t.carousel.style.cssText,o=t.container.style.cssText;t.carousel.style.visibility="visible",t.carousel.style.display="block",t.container.style.visibility="visible",t.container.style.display="flex",t.carousel.offsetHeight,t.container.offsetHeight;const n=Array.from(t.container.children);if(0===n.length)return i.CyreLog.warn(`No slides found in carousel ${e.id}`),t.carousel.style.cssText=r,t.container.style.cssText=o,null;const a=Math.max(t.carousel.parentElement?.clientWidth||0,t.carousel.clientWidth||0,window.innerWidth||1024),s=Math.max(t.carousel.parentElement?.clientHeight||0,t.carousel.clientHeight||0,window.innerHeight||768);let l=0,d=0,c=0,u=0;n.forEach((e=>{const t=e.style.cssText;e.style.visibility="visible",e.style.display="inline-block",e.offsetHeight;const r=window.getComputedStyle(e),i=parseInt(r.marginLeft)||0,o=parseInt(r.marginRight)||0,n=parseInt(r.marginTop)||0,a=parseInt(r.marginBottom)||0,s=e.offsetWidth+i+o,m=e.offsetHeight+n+a;c=Math.max(c,s),u=Math.max(u,m),l+=s,d+=m,e.style.cssText=t})),0===c&&(c=200),0===u&&(u=200),0===l&&(l=c*n.length),0===d&&(d=u*n.length);const m=Math.min(Math.max(1,Math.floor(a/c)),e.item.max||10),f=e.io.orientation?a:Math.min(m*c,a),h=e.io.orientation?Math.min(m*u,s):u,g=e.io.orientation?a:l,p=e.io.orientation?d:u,y=e.io.orientation?-Math.max(0,p-h):-Math.max(0,g-f);return t.carousel.style.cssText=r,t.container.style.cssText=o,i.CyreLog.info(`Carousel ${e.id} dimensions calculated:`,{slides:n.length,slideWidth:c,slideHeight:u,carouselWidth:f,carouselHeight:h,containerWidth:g,containerHeight:p,endOfSlidePosition:y}),{...e,item:{...e.item,width:c,height:u},numberOfSlots:m,carousel:{width:f,height:h},container:{width:g,height:p},endOfSlidePosition:y,noOfChildren:n.length}}catch(r){return i.CyreLog.error(`Error in fixed dimension calculation for ${e.id}:`,r),null}},T=e=>({animate:`animate_${e}`,snap:`snap_${e}`,prevSlide:`prev_slide_${e}`,nextSlide:`next_slide_${e}`,lastSlide:`last_slide_${e}`,firstSlide:`first_slide_${e}`,goToSlide:`go_to_slide_${e}`,activate:`activate_${e}`,refresh:`refresh_${e}`,transform:`transform_${e}`,stateUpdate:`state_update_${e}`,dimensionUpdate:`dimension_update_${e}`,error:`error_${e}`}),w=(e,t,r)=>{try{return i.cyre.call(e,t),!0}catch(o){if(i.CyreLog.warn(`Failed to call event ${e}`,o),r)try{return i.CyreLog.info(`Attempting fallback to ${r}`),i.cyre.call(r,t),!0}catch(n){i.CyreLog.error(`Fallback to ${r} also failed`,n)}return!1}};const b=(e,t={})=>{if(!e||"string"!=typeof e)return void i.CyreLog.error(`Cannot initialize events for invalid carousel: ${e}`);if(!A[e])return void i.CyreLog.error(`Carousel ${e} not found for event initialization`);const r=A[e].getVirtual,o=T(e);A[e].setState={...r,eventIds:o},i.cyre.on(o.animate,(e=>({id:r.io.animateDirection>0?c.ANIMATE_FORWARD:c.ANIMATE_BACKWARD,payload:e}))),i.cyre.on(o.snap,(e=>({id:c.SNAP,payload:e}))),i.cyre.on(o.prevSlide,(e=>({id:c.PREV_SLIDE,payload:e}))),i.cyre.on(o.nextSlide,(e=>({id:c.NEXT_SLIDE,payload:e}))),i.cyre.on(o.firstSlide,(e=>({id:c.FIRST_SLIDE,payload:e}))),i.cyre.on(o.lastSlide,(e=>({id:c.LAST_SLIDE,payload:e}))),i.cyre.on(o.goToSlide,(t=>({id:c.GO_TO_SLIDE,payload:{virtual:A[e].getVirtual,index:t.index}}))),i.cyre.on(o.activate,(e=>({id:c.ACTIVATE,payload:e}))),i.cyre.on(o.refresh,(t=>({id:c.REFRESH_CAROUSEL,payload:t||A[e].getState}))),i.cyre.on(o.error,(t=>({id:c.ERROR_HANDLER,payload:{...t,id:e}}))),i.cyre.action([{id:o.animate,interval:t.duration||u,repeat:t.loop||0,log:!1},{id:o.snap,throttle:50},{id:o.prevSlide,throttle:300},{id:o.nextSlide,throttle:300},{id:o.firstSlide},{id:o.lastSlide},{id:o.goToSlide,throttle:300},{id:o.activate,throttle:300},{id:o.refresh,throttle:100},{id:o.error}]),t.animate&&t.duration&&i.cyre.call(o.animate,r),0!==t.performance&&(i.cyre.action({id:`performance_monitor_${e}`,interval:5e3,repeat:!0}),i.cyre.on(`performance_monitor_${e}`,(()=>({id:c.PERFORMANCE_MONITOR,payload:{id:e}}))),i.cyre.call(`performance_monitor_${e}`))},C=(e,t)=>{if(!e?.id)return{offsets:[],selectedIndex:-1};const r=document.querySelector(`#${e.id} .holo-container`);if(!r)return{offsets:[],selectedIndex:-1};const i=Array.from(r.children),o=i.map((t=>e.io.orientation?t.offsetTop||0:t.offsetLeft||0));let n=-1;return t&&(n=i.findIndex((e=>e===t))),{offsets:o,selectedIndex:n}},A={},L=(e,t)=>Math.round(e/t)*t,N={id:null,virtual:null,startX:0,startY:0,currentX:0,currentY:0,distanceX:0,distanceY:0,velocityX:0,velocityY:0,startTransformX:0,startTransformY:0,pressed:!1,startTime:0,multiplier:1.5,orientation:!1,targetElement:null},$=(e,t)=>e/(t||1);i.cyre.on(n,(()=>{if(!N.id||!N.virtual)return;const e=performance.now()-N.startTime,t={id:N.id,virtual:N.virtual,targetElement:N.targetElement,distanceX:N.distanceX,distanceY:N.distanceY,velocityX:N.velocityX,velocityY:N.velocityY,orientation:N.orientation,startTime:N.startTime};return{id:d,payload:{touchState:t,timeElapsed:e}}}));const D=(e,t)=>{e.preventDefault(),i.cyre.call(o,{event:e,id:t})},M=(e,t)=>{if(!(e.id&&t&&t.carousel&&t.container))return void i.CyreLog.error(`Cannot setup DOM handlers for carousel ${e?.id}: Invalid shadow elements`);if(i.CyreLog.info(`Setting up DOM handlers for carousel ${e.id}`),e.io.drag){const r=t=>{t.preventDefault(),t.stopPropagation(),D(t,e.id),i.CyreLog.debug(`Mouse down detected on carousel ${e.id}`)};t.container.addEventListener("mousedown",r,{passive:!1});t.container.querySelectorAll(".holo").forEach(((t,r)=>{t.addEventListener("click",(o=>{o.preventDefault(),o.stopPropagation(),i.CyreLog.debug(`Slide ${r} clicked in carousel ${e.id}`),e.eventIds?.activate&&i.cyre.call(e.eventIds.activate,[t,e])}),{passive:!1})}))}if(e.io.drag){const r=t=>{t.preventDefault(),t.stopPropagation(),D(t,e.id),i.CyreLog.debug(`Touch start detected on carousel ${e.id}`)};t.container.addEventListener("touchstart",r,{passive:!1})}if(e.io.wheel){const r=t=>{t.preventDefault(),t.stopPropagation(),((e,t)=>{e.preventDefault();const r=A[t].getVirtual,i=r.eventIds||T(r.id);e.deltaY<0?w(i.prevSlide,r,"prev_slide"):e.deltaY>0&&w(i.nextSlide,r,"next_slide")})(t,e.id),i.CyreLog.debug(`Wheel event detected on carousel ${e.id}`)};t.carousel.addEventListener("wheel",r,{passive:!1})}const r=t.carousel.querySelector(".holo-prev"),o=t.carousel.querySelector(".holo-next");r&&r.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),e.eventIds?.prevSlide&&i.cyre.call(e.eventIds.prevSlide,e)})),o&&o.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),e.eventIds?.nextSlide&&i.cyre.call(e.eventIds.nextSlide,e)})),e.io.animate&&e.eventIds?.animate&&i.cyre.call(e.eventIds.animate,e);const n=()=>{i.cyre.call(c.REFRESH_CAROUSEL,{virtual:e,shadow:t})};window.addEventListener("resize",n,{passive:!0}),window.addEventListener("orientationchange",n,{passive:!0})},k=(e="")=>({...p,id:e}),x=(e,t={})=>{const r=e.id||`holo-${Date.now()}`;e.id=r;const o=e.getElementsByClassName("holo-container")[0];if(!o)throw console.error("@Holo: holo-container not found in:",r),new Error("Missing holo-container element");const n={carousel:e,container:o},a=((e="")=>({id:e,carousel:{},container:{},io:k(e),title:null,description:null,duration:u,transitionTiming:m,transformX:0,transformY:0,transformZ:0,numberOfSlots:0,endOfSlide:0,endOfSlidePosition:0,item:{max:8,width:0,height:0,min:1},noOfChildren:0,startNumber:0,eventIds:T(e)}))(r);a.io={...a.io,...t,id:r};const s=n.carousel.clientWidth||0,l=n.carousel.clientHeight||0,d=n.container.clientWidth||0,c=n.container.clientHeight||0,f=n.container.children.length||0,h={...a,carousel:{width:s,height:l},container:{width:d,height:c},noOfChildren:f,startNumber:0,endOfSlidePosition:a.io.orientation?-Math.max(0,c-l):-Math.max(0,d-s)},g=`state_updated_${r}`;i.cyre.on(g,(e=>{})),i.cyre.action({id:g,throttle:16,detectChanges:!0});return{virtual:h,shadow:n,get getVirtual(){return{...this.virtual}},get getShadow(){return this.shadow},get getState(){return{virtual:this.getVirtual,shadow:this.getShadow}},get getDimensions(){return{car:{w:this.shadow.carousel.clientWidth||0,h:this.shadow.carousel.clientHeight||0},con:{w:this.shadow.container.clientWidth||0,h:this.shadow.container.clientHeight||0,x:this.virtual.transformX,y:this.virtual.transformY,z:this.virtual.transformZ}}},set setState(e){e&&(this.virtual={...this.virtual,...e},this.updateDOMTransform(),i.cyre.call(`state_updated_${r}`,this.virtual))},set setDimension(e){e&&(this.virtual={...this.virtual,...e},this.updateDOMDimensions())},set updateStyle(e){this.updateTransitionStyle(1===e)},updateDOMTransform(){this.shadow.container&&(this.shadow.container.style.transform=`translate3d(${this.virtual.transformX}px, ${this.virtual.transformY}px, ${this.virtual.transformZ}px)`)},updateDOMDimensions(){this.shadow.carousel&&(this.virtual.io.orientation?this.shadow.carousel.style.height=`${this.virtual.carousel.height}px`:this.shadow.carousel.style.width=`${this.virtual.carousel.width}px`)},updateTransitionStyle(e){this.shadow.container&&(e?(this.shadow.container.style.transitionDuration=`${this.virtual.duration}ms`,this.shadow.container.style.transitionTimingFunction=this.virtual.transitionTiming):(this.shadow.container.style.transitionDuration="0ms",this.shadow.container.style.transitionTimingFunction="linear"))}}},P=(e,t={})=>{if(!e||!e.nodeType)return console.error("@Holo: Invalid DOM element provided"),null;e.id||(e.id=`holo-${Date.now()}`);try{return A[e.id]=x(e,t),console.log("@Holo: Created carousel:",e.id),((e,t)=>{if(e)if(e.id&&"string"==typeof e.id){try{b(e.id,e.io)}catch(r){i.CyreLog.error(`Error initializing events for carousel ${e.id}:`,r)}e.io.enabled&&M(e,t),i.cyre.call(c.REFRESH_CAROUSEL,{virtual:e,shadow:t})}else i.CyreLog.error("@Holo: Virtual state has no valid ID",e);else i.CyreLog.error("@Holo: Major malfunctions - Virtual state is missing")})(A[e.id].getVirtual,A[e.id].getShadow),e.id}catch(r){return console.error("@Holo: Error creating carousel:",r),null}},H=[];let X=!1;const Y=()=>(X=!X,i.CyreLog.info("Debug mode "+(X?"enabled":"disabled")),X),F=()=>{X&&Object.keys(A).forEach((e=>{const t=document.getElementById(e);if(!t)return;t.classList.add("holo-debug");let r=t.querySelector(".holo-debug-overlay");r||(r=document.createElement("div"),r.className="holo-debug-overlay",t.appendChild(r));const i=A[e].getVirtual;r.innerHTML=`\n      <div class="holo-debug-info">\n        <div>ID: ${e}</div>\n        <div>X: ${Math.round(i.transformX)}</div>\n        <div>Y: ${Math.round(i.transformY)}</div>\n        <div>End of Slide: ${i.endOfSlide}</div>\n        <div>Orientation: ${i.io.orientation?"Vertical":"Horizontal"}</div>\n      </div>\n    `}))},U=()=>{document.querySelectorAll(".holo-debug-overlay").forEach((e=>{e.remove()})),document.querySelectorAll(".holo-debug").forEach((e=>{e.classList.remove("holo-debug")}))};function V(){try{const e=Object.keys(A);if(0===e.length)return void i.CyreLog.info("No carousels to refresh");i.CyreLog.info(`Refreshing ${e.length} carousels`),i.cyre.call(c.REFRESH_SCREEN),e.forEach((e=>{try{if(!A[e]?.getShadow?.carousel)return void i.CyreLog.warn(`Missing DOM elements for carousel ${e}, skipping refresh`);if(!(A[e].getShadow.carousel.offsetWidth>0||A[e].getShadow.carousel.offsetHeight>0))return void i.CyreLog.warn(`Carousel ${e} not visible in DOM, skipping refresh`);i.cyre.call(c.REFRESH_CAROUSEL,A[e].getState)}catch(t){i.CyreLog.error(`Error refreshing carousel ${e}:`,t)}}))}catch(e){i.CyreLog.error("Error in global refresh:",e)}}i.CyreLog.info("%c HOLO - Initializing Holo Carousel v3.5.0 ","background: #022d5f; color: white; display: block;");const B="undefined"!=typeof window?new URLSearchParams(window.location.search):null;((e=!1)=>{if((e=>{X=e,i.CyreLog.info("Debug mode "+(e?"enabled":"disabled"))})(e),e){(()=>{if(!X)return;const e="holo-debug-styles";if(document.getElementById(e))return;const t=document.createElement("style");t.id=e,t.textContent="\n    .holo-debug {\n      position: relative;\n    }\n    \n    .holo-debug-overlay {\n      position: absolute;\n      top: 0;\n      left: 0;\n      background: rgba(0, 0, 0, 0.7);\n      color: #fff;\n      padding: 5px;\n      border-radius: 3px;\n      font-size: 10px;\n      z-index: 9999;\n      pointer-events: none;\n    }\n    \n    .holo-debug .holo-container {\n      outline: 1px solid rgba(255, 0, 0, 0.5);\n    }\n    \n    .holo-debug .holo {\n      outline: 1px dashed rgba(0, 255, 0, 0.5);\n    }\n  ",document.head.appendChild(t)})();const e=(()=>{if(!X)return()=>{};const e=setInterval((()=>{F()}),500);return()=>clearInterval(e)})();window.holoDebug={toggleDebugMode:Y,addDebugOverlays:F,removeDebugOverlays:U,getDatabaseState:()=>({...A}),stopMonitoring:e}}})(B?.has("debug")||!1),i.CyreLog.info("Initializing Holo event system"),i.cyre.on(c.STATE_BATCH_UPDATE,(e=>{if(!e||!e.id)return{id:c.ERROR_HANDLER,payload:{source:"state_batch_update",error:"Invalid batch update payload",data:e}};const{id:t,changes:r}=e,i=A[t]?.getVirtual;return i?(A[t].setState={...i,...r},{id:c.SNAP_TO_POSITION,payload:A[t].getVirtual}):{id:c.ERROR_HANDLER,payload:{source:"state_batch_update",error:`Carousel ${t} not found for batch update`,id:t}}})),i.cyre.on(c.STATE_UPDATE,(e=>{if(!e||!e.id||!e.property)return{id:c.ERROR_HANDLER,payload:{source:"state_update",error:"Invalid state update payload",data:e}};const{id:t,property:r,value:i}=e,o=A[t]?.getVirtual;return o?(A[t].setState={...o,[r]:i},["transformX","transformY"].includes(r)?{id:c.SNAP_TO_POSITION,payload:A[t].getVirtual}:void 0):{id:c.ERROR_HANDLER,payload:{source:"state_update",error:`Carousel ${t} not found for state update`,id:t}}})),i.cyre.on(c.INIT_DIMENSIONS,(e=>{if(!e||!e.id)return{id:c.ERROR_HANDLER,payload:{source:"init_dimensions",error:"Invalid init dimensions payload",data:e}};const{id:t}=e;if(!A[t])return{id:c.ERROR_HANDLER,payload:{source:"init_dimensions",error:`Carousel ${t} not found for dimension init`,id:t}};const r=A[t].getVirtual,o=A[t].getShadow;if(void 0!==document.visibilityState&&"visible"!==document.visibilityState)return i.CyreLog.info(`Deferring dimensions calculation for ${t} until DOM is visible`),void setTimeout((()=>i.cyre.call(c.INIT_DIMENSIONS,{id:t})),100);try{const e=O(r,o);if(e)return A[t].setDimension={...e},{id:c.SNAP_TO_POSITION,payload:e};const n=I(r,o);if(n)return A[t].setDimension={...n},{id:c.SNAP_TO_POSITION,payload:n};setTimeout((()=>{i.cyre.call(c.INIT_DIMENSIONS,{id:t})}),300)}catch(n){return{id:c.ERROR_HANDLER,payload:{source:"dimension_calculation",id:t,error:n}}}})),i.cyre.on(c.REFRESH_CAROUSEL,(e=>{try{const{virtual:t,shadow:r}=e;if(!t?.id)return{id:c.ERROR_HANDLER,payload:{source:"refresh_carousel",error:"Invalid virtual state",data:{virtualId:t?.id}}};r.container.setAttribute("style","");const o=O(t,r);if(o)A[t.id].setDimension={...o};else{const e=I(t,r);if(!e)return setTimeout((()=>{const e=O(t,r);e&&(A[t.id].setDimension={...e},i.cyre.call(c.SNAP_TO_POSITION,e))}),300),{id:c.ERROR_HANDLER,payload:{source:"refresh_carousel",error:"Failed to calculate dimensions",id:t.id}};A[t.id].setDimension={...e}}return{id:c.SNAP_TO_POSITION,payload:o||t}}catch(t){return{id:c.ERROR_HANDLER,payload:{source:"refresh_carousel",error:t instanceof Error?t.message:"Unknown error"}}}})),i.cyre.on(c.REFRESH_SCREEN,(()=>{const e=Object.keys(A);i.CyreLog.info(`Refreshing ${e.length} carousels`),e.forEach((e=>{i.cyre.call(c.REFRESH_CAROUSEL,A[e].getState)}))})),i.cyre.on(c.NEXT_SLIDE,(e=>{if(!e?.id)return{id:c.ERROR_HANDLER,payload:{source:"next_slide",error:"Invalid virtual state in next slide"}};if(-1===e.endOfSlide&&!e.io.loop)return;if(-1===e.endOfSlide&&e.io.loop)return{id:c.FIRST_SLIDE,payload:e};const t=e.io.orientation?e.item.height||0:e.item.width||0;if(!t)return{id:c.ERROR_HANDLER,payload:{source:"next_slide",error:`Carousel ${e.id} item ${e.io.orientation?"height":"width"} not calculated yet`,id:e.id}};const r=e.io.orientation?e.transformY:e.transformX,o=Math.round(Math.abs(r)/t),n=o+1,a=-Math.abs(n*t),s=(e.io.orientation,e.endOfSlidePosition),l=Math.max(a,s),d={...e,transformX:e.io.orientation?e.transformX:l,transformY:e.io.orientation?l:e.transformY};return i.CyreLog.info(`Navigating to next slide: ${o} -> ${n}, position: ${r} -> ${l}`),{id:c.SNAP_TO_POSITION,payload:d}})),i.cyre.on(c.PREV_SLIDE,(e=>{if(!e?.id)return{id:c.ERROR_HANDLER,payload:{source:"prev_slide",error:"Invalid virtual state in previous slide"}};if(1===e.endOfSlide&&!e.io.loop)return;if(1===e.endOfSlide&&e.io.loop)return{id:c.LAST_SLIDE,payload:e};const t=e.io.orientation?e.item.height||0:e.item.width||0;if(!t)return{id:c.ERROR_HANDLER,payload:{source:"prev_slide",error:`Carousel ${e.id} item ${e.io.orientation?"height":"width"} not calculated yet`,id:e.id}};const r={...e,transformX:e.io.orientation?e.transformX:e.transformX+t,transformY:e.io.orientation?e.transformY+t:e.transformY};return{id:c.SNAP_TO_POSITION,payload:r}})),i.cyre.on(c.FIRST_SLIDE,(e=>{if(!e?.id)return{id:c.ERROR_HANDLER,payload:{source:"first_slide",error:"Invalid virtual state in first slide"}};const t={...e,transformX:0,transformY:0,endOfSlide:1};return{id:c.SNAP_TO_POSITION,payload:t}})),i.cyre.on(c.LAST_SLIDE,(e=>{if(!e?.id)return{id:c.ERROR_HANDLER,payload:{source:"last_slide",error:"Invalid virtual state in last slide"}};if(void 0===e.endOfSlidePosition)return{id:c.ERROR_HANDLER,payload:{source:"last_slide",error:`Carousel ${e.id} end position not calculated`,id:e.id}};const t={...e,transformX:e.io.orientation?0:e.endOfSlidePosition,transformY:e.io.orientation?e.endOfSlidePosition:0,endOfSlide:-1};return{id:c.SNAP_TO_POSITION,payload:t}})),i.cyre.on(c.GO_TO_SLIDE,(e=>{if(!e||!e.virtual||!e.virtual.id)return{id:c.ERROR_HANDLER,payload:{source:"go_to_slide",error:"Invalid payload for go to slide"}};const{virtual:t,index:r}=e,i=t.io.orientation?t.item.height||0:t.item.width||0;if(!i)return{id:c.ERROR_HANDLER,payload:{source:"go_to_slide",error:`Carousel ${t.id} item ${t.io.orientation?"height":"width"} not calculated yet`,id:t.id}};const o={...t,transformX:t.io.orientation?0:-Math.abs(r*i),transformY:t.io.orientation?-Math.abs(r*i):0};return{id:c.SNAP_TO_POSITION,payload:o}})),i.cyre.on(c.ACTIVATE,(e=>{const[t,r]=e;if(!t||!r||!r.id)return{id:c.ERROR_HANDLER,payload:{source:"activate",error:"Invalid activate payload"}};const{offsets:i,selectedIndex:o}=C(r,t);if(-1===o)return{id:c.ERROR_HANDLER,payload:{source:"activate",error:"Could not determine slide index",id:r.id}};document.querySelectorAll(`#${r.id} .holo`).forEach((e=>{e.classList.remove("active")})),t.classList.add("active");const n={...r,transformX:r.io.orientation?r.transformX:-Math.abs(i[o]),transformY:r.io.orientation?-Math.abs(i[o]):r.transformY};return{id:c.SNAP_TO_POSITION,payload:n}})),i.cyre.on(c.ANIMATE_FORWARD,(e=>{if(e&&e.id)return-1===e.endOfSlide&&e.io.loop?{id:c.FIRST_SLIDE,payload:e}:{id:c.NEXT_SLIDE,payload:e}})),i.cyre.on(c.ANIMATE_BACKWARD,(e=>{if(e&&e.id)return 1===e.endOfSlide&&e.io.loop?{id:c.LAST_SLIDE,payload:e}:{id:c.PREV_SLIDE,payload:e}})),i.cyre.on(c.SNAP_TO_POSITION,(e=>({id:c.SNAP,payload:e}))),i.cyre.on(c.SNAP,(e=>{if(!e?.id)return{id:c.ERROR_HANDLER,payload:{source:"snap",error:"Invalid virtual state in SNAP event"}};i.CyreLog.info(`SNAP event for ${e.id}: transformX=${e.transformX}, transformY=${e.transformY}`);try{if(e.io.orientation&&(!e.item.height||isNaN(e.item.height)))return i.CyreLog.warn(`Carousel ${e.id} item height not calculated yet. Attempting to fix...`),void setTimeout((()=>{i.cyre.call(c.REFRESH_CAROUSEL,A[e.id].getState)}),100);if(!e.io.orientation&&(!e.item.width||isNaN(e.item.width)))return i.CyreLog.warn(`Carousel ${e.id} item width not calculated yet. Attempting to fix...`),void setTimeout((()=>{i.cyre.call(c.REFRESH_CAROUSEL,A[e.id].getState)}),100);A[e.id].updateStyle=1;const t=e.io.orientation?v(e):E(e);(isNaN(t.transformX)||isNaN(t.transformY))&&(i.CyreLog.error(`NaN transform values detected for ${e.id}: X=${t.transformX}, Y=${t.transformY}`),t.transformX=isNaN(t.transformX)?0:t.transformX,t.transformY=isNaN(t.transformY)?0:t.transformY),A[e.id].setState={...t};const r=document.getElementById(e.id);if(r){const e=r.querySelector(".holo-container");if(e){const r=isNaN(t.transformX)?0:t.transformX,o=isNaN(t.transformY)?0:t.transformY;e.style.transform=`translate3d(${r}px, ${o}px, 0px)`,i.CyreLog.debug(`Applied direct transform: translate3d(${r}px, ${o}px, 0px)`)}}return{id:c.TRANSFORM_COMPLETE,payload:{id:e.id,position:e.io.orientation?Math.abs(Math.round(t.transformY/(t.item.height||1))):Math.abs(Math.round(t.transformX/(t.item.width||1)))}}}catch(t){return{id:c.ERROR_HANDLER,payload:{source:"snap",error:t instanceof Error?t.message:"Error in SNAP event",id:e.id}}}})),i.cyre.on(c.TRANSFORM_COMPLETE,(e=>{})),i.cyre.on(c.ERROR_HANDLER,(e=>{const{source:t,error:r,id:o}=e;i.CyreLog.error(`Holo Error [${t}]:`,r),o&&A[o]&&"dimension_calculation"===t&&(i.CyreLog.info(`Attempting to recover ${o} via refresh`),setTimeout((()=>i.cyre.call(c.REFRESH_CAROUSEL,A[o].getState)),200))})),i.cyre.on(c.PERFORMANCE_MONITOR,(e=>{const{id:t}=e;if(!t||!A[t])return;const r=i.cyre.getPerformanceState();return r.stress>.8?{id:c.PERFORMANCE_OPTIMIZE,payload:{id:t,stress:r.stress,level:"high"}}:r.stress>.5?{id:c.PERFORMANCE_OPTIMIZE,payload:{id:t,stress:r.stress,level:"medium"}}:void 0})),i.cyre.on(c.PERFORMANCE_OPTIMIZE,(e=>{const{id:t,level:r}=e;if(!t||!A[t])return;const i=A[t].getVirtual;switch(r){case"high":A[t].setState={...i,io:{...i.io,animate:0,wheel:0,duration:Math.max(400,i.io.duration||0)}};break;case"medium":A[t].setState={...i,io:{...i.io,duration:Math.max(300,i.io.duration||0)}}}})),i.cyre.action([{id:c.STATE_UPDATE,detectChanges:!0,throttle:50},{id:c.STATE_BATCH_UPDATE,detectChanges:!0},{id:c.INIT_DIMENSIONS,throttle:100},{id:c.REFRESH_CAROUSEL,throttle:100},{id:c.REFRESH_SCREEN,throttle:200},{id:c.NEXT_SLIDE,throttle:300},{id:c.PREV_SLIDE,throttle:300},{id:c.FIRST_SLIDE},{id:c.LAST_SLIDE},{id:c.GO_TO_SLIDE,throttle:300},{id:c.ACTIVATE,throttle:300},{id:c.SNAP_TO_POSITION,throttle:50},{id:c.SNAP,throttle:50},{id:c.TRANSFORM_COMPLETE},{id:c.ERROR_HANDLER},{id:c.PERFORMANCE_MONITOR,interval:5e3,repeat:!0},{id:c.PERFORMANCE_OPTIMIZE,throttle:1e3}]),(()=>{i.CyreLog.info("Initializing touch system");try{i.cyre.on(o,(e=>{const{event:t,id:r}=e;if(!A[r]?.getVirtual)return void i.CyreLog.error(`No carousel found with ID: ${r}`);const o=A[r].getVirtual;return 0!==o.io.drag||0!==o.io.swipe?(N.id=r,N.virtual=o,N.startX="touches"in t?t.touches[0].clientX:t.clientX,N.startY="touches"in t?t.touches[0].clientY:t.clientY,N.currentX=N.startX,N.currentY=N.startY,N.distanceX=0,N.distanceY=0,N.velocityX=0,N.velocityY=0,N.startTransformX=o.transformX,N.startTransformY=o.transformY,N.pressed=!0,N.startTime=performance.now(),N.orientation=!!o.io.orientation,N.targetElement=t.target,A[r].updateStyle=0,{id:N.orientation?s:a,payload:N}):void 0})),i.cyre.on(a,(e=>{if(!e.pressed||!e.id||!e.virtual)return;const t=e.startX-e.currentX;N.distanceX=t;const r=e.startTransformX-t*e.multiplier,i=S({...e.virtual,transformX:r});return A[e.id].setState=i,N.virtual=i,{id:l,payload:N}})),i.cyre.on(s,(e=>{if(!e.pressed||!e.id||!e.virtual)return;const t=e.startY-e.currentY;N.distanceY=t;const r=e.startTransformY-t*e.multiplier,i=R({...e.virtual,transformY:r});return A[e.id].setState=i,N.virtual=i,{id:l,payload:N}})),i.cyre.on(l,(e=>{if(!e.pressed||!e.virtual)return;const t=performance.now()-e.startTime;N.velocityX=$(e.distanceX,t),N.velocityY=$(e.distanceY,t)})),i.cyre.on(n,(()=>{if(!N.pressed||!N.id||!N.virtual)return;N.pressed=!1;const e=performance.now()-N.startTime;return{id:d,payload:{touchState:{...N},timeElapsed:e}}})),i.cyre.on(d,(e=>{const{touchState:t,timeElapsed:r}=e;if(!t.id||!t.virtual)return;const o=t.id,n=t.virtual,a=t.targetElement,s=t.orientation?t.velocityY:t.velocityX,l=Math.abs(s),d=n.eventIds||{nextSlide:`next_slide_${o}`,prevSlide:`prev_slide_${o}`,snap:`snap_${o}`,activate:`activate_${o}`};A[o].updateStyle=1;try{if(l>.8&&0!==n.io.swipe)return(t.orientation?t.distanceY>0:t.distanceX>0)?{id:d.nextSlide,payload:n}:{id:d.prevSlide,payload:n};if((e=>e<300)(r)&&a&&n.io.onClick){const e=a.closest(".holo");if(e)return{id:d.activate,payload:[e,n]}}if(n.io.snap)return{id:d.snap,payload:n};const e=((e,t=!1)=>e.io.orientation?t?R(e):v(e):t?S(e):E(e))(n,!1);A[o].setState=e}catch(c){return i.CyreLog.error("Error in touch end processing:",c),{id:d.snap,payload:n}}})),i.cyre.action([{id:o,throttle:50},{id:a},{id:s},{id:l,throttle:100},{id:n,throttle:50},{id:d}]),function(){const e=e=>{if(N.pressed&&N.id){if(e.preventDefault(),"touches"in e&&e.touches.length>0)N.currentX=e.touches[0].clientX,N.currentY=e.touches[0].clientY;else{if(!("clientX"in e))return void t(e);N.currentX=e.clientX,N.currentY=e.clientY}i.cyre.call(N.orientation?s:a,N)}},t=e=>{N.pressed&&(e.preventDefault(),i.cyre.call(n),N.pressed=!1,N.id=null,N.virtual=null)};document.addEventListener("mousemove",e,{passive:!1}),document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("mouseup",t,{passive:!1}),document.addEventListener("touchend",t,{passive:!1}),document.addEventListener("touchcancel",t,{passive:!1}),document.addEventListener("mouseleave",t,{passive:!1})}()}catch(e){i.CyreLog.error("Error during touch system initialization:",e)}})(),i.CyreLog.info("Initializing performance monitoring"),i.cyre.on("global_performance_check",(()=>{const e=i.cyre.getPerformanceState(),t={timestamp:Date.now(),stress:e.stress,totalProcessingTime:e.totalProcessingTime,frameRate:e.stress>.5?30-Math.floor(20*e.stress):60,carouselCount:Object.keys(A).length};H.push(t),H.length>2*g&&H.splice(0,H.length-g);const r=Object.keys(A);e.stress>f?r.forEach((t=>{i.cyre.call(c.PERFORMANCE_OPTIMIZE,{id:t,stress:e.stress,level:"high"})})):e.stress>h&&r.forEach((t=>{i.cyre.call(c.PERFORMANCE_OPTIMIZE,{id:t,stress:e.stress,level:"medium"})}))})),i.cyre.on(c.PERFORMANCE_OPTIMIZE,(e=>{const{id:t,level:r}=e;if(!t||!A[t])return;const o=A[t].getVirtual;switch(r){case"high":A[t].setState={...o,io:{...o.io,animate:0,wheel:0,duration:Math.max(400,o.io.duration||0)}},i.CyreLog.info(`Applied high-level optimizations to carousel ${t}`);break;case"medium":A[t].setState={...o,io:{...o.io,duration:Math.max(300,o.io.duration||0)}},i.CyreLog.info(`Applied medium-level optimizations to carousel ${t}`)}})),i.cyre.action([{id:"global_performance_check",interval:5e3,repeat:!0,log:!1},{id:c.PERFORMANCE_OPTIMIZE,throttle:1e3}]),i.cyre.call("global_performance_check"),i.cyre.action({id:"window-resize",throttle:200,log:!1}),i.cyre.on("window-resize",(()=>({id:c.REFRESH_SCREEN,payload:null}))),window.addEventListener("resize",(()=>{i.cyre.call("window-resize")}),{passive:!0});const q={INIT:function(e=y){return i.CyreLog.info(`Initializing Holo with selector: ${e}`),window.addEventListener("load",(()=>{V(),setTimeout((()=>{(async()=>{const e=Object.keys(A);i.CyreLog.info(`Force refreshing ${e.length} carousels`);for(const t of e)await _(t)})().then((()=>{i.CyreLog.info("Force refresh completed successfully")}))}),300)})),e},AUTO:(e="holo-carousel")=>{console.log("@holo holo auto activated:",e);const t=document.getElementsByClassName(e);0!==t.length?Array.from(t).forEach((e=>{try{P(e,{})}catch(t){i.CyreLog.error("Error auto-initializing carousel:",t)}})):console.log("@Holo: carousel structure not found")},BUILD:P,carousel:function(e,t={}){try{if(!A[e])return{ok:!1,data:`Carousel with ID ${e} not found`};const r=A[e].getVirtual,o=Object.entries(t).reduce(((e,[t,r])=>t in p?{...e,[t]:r}:(i.CyreLog.warn(`Invalid option ignored: ${t}`),e)),{}),n={...r.io,...o};return A[e].setState={...A[e].getVirtual,io:n},b(e,n),{ok:!0,data:n}}catch(r){return i.CyreLog.error("Error updating carousel options:",r),{ok:!1,data:r instanceof Error?r.message:"Unknown error"}}},dimensions:function(e){return A[e]?A[e].getDimensions:(i.CyreLog.warn(`Carousel with ID ${e} not found`),null)},getState:function(e){return A[e]?A[e].getVirtual:(i.CyreLog.warn(`Carousel with ID ${e} not found`),null)},getPosition:function(e){return A[e]?(e=>e?.id&&e.item.width?e.io.orientation?Math.abs(Math.round(e.transformY/(e.item.height||1))):Math.abs(Math.round(e.transformX/(e.item.width||1))):0)(A[e].getVirtual):0},next:function(e){if(!A[e])return void i.CyreLog.warn(`Carousel with ID ${e} not found`);const t=A[e].getVirtual,r=t.eventIds?.nextSlide||`next_slide_${e}`;w(r,t,c.NEXT_SLIDE)},prev:function(e){if(!A[e])return void i.CyreLog.warn(`Carousel with ID ${e} not found`);const t=A[e].getVirtual,r=t.eventIds?.prevSlide||`prev_slide_${e}`;w(r,t,c.PREV_SLIDE)},first:function(e){if(!A[e])return void i.CyreLog.warn(`Carousel with ID ${e} not found`);const t=A[e].getVirtual,r=t.eventIds?.firstSlide||`first_slide_${e}`;w(r,t,c.FIRST_SLIDE)},last:function(e){if(!A[e])return void i.CyreLog.warn(`Carousel with ID ${e} not found`);const t=A[e].getVirtual,r=t.eventIds?.lastSlide||`last_slide_${e}`;w(r,t,c.LAST_SLIDE)},goTo:function e(t,r){if(!A[t])return void i.CyreLog.warn(`Carousel with ID ${t} not found`);const o=A[t].getVirtual;if(o.eventIds?.goToSlide)w(o.eventIds.goToSlide,{index:r},c.GO_TO_SLIDE);else if(o.item.width){const e={...o,transformX:o.io.orientation?0:-Math.abs(r*o.item.width),transformY:o.io.orientation?-Math.abs(r*o.item.height):0},i=o.eventIds?.snap||`snap_${t}`;w(i,e,c.SNAP)}else i.CyreLog.warn(`Carousel ${t} item width not calculated yet`),i.cyre.call(c.REFRESH_CAROUSEL,A[t].getState),setTimeout((()=>{A[t]?.getVirtual?.item?.width&&e(t,r)}),100)},refresh:V,getPerformanceHistory:()=>H.slice(-10),optimize:function(e,t){((e,t)=>{if(!e||!A[e])return void i.CyreLog.warn(`Cannot optimize carousel ${e}: not found`);const r=A[e].getVirtual;switch(t){case"aggressive":A[e].setState={...r,io:{...r.io,animate:0,wheel:0,drag:0,swipe:0,duration:Math.max(500,r.io.duration||0)}},i.CyreLog.info(`Applied aggressive optimizations to carousel ${e}`);break;case"medium":A[e].setState={...r,io:{...r.io,animate:0,wheel:0,duration:Math.max(400,r.io.duration||0)}},i.CyreLog.info(`Applied medium optimizations to carousel ${e}`);break;case"light":A[e].setState={...r,io:{...r.io,duration:Math.max(300,r.io.duration||0)}},i.CyreLog.info(`Applied light optimizations to carousel ${e}`)}})(e,t)},handleTouchStart:D,EVENTS:c};return"undefined"!=typeof window&&(window.Holo=q),q}));
//# sourceMappingURL=holo.js.map
